{"filter":false,"title":"quickstart.rb","tooltip":"/config/quickstart.rb","undoManager":{"mark":33,"position":33,"stack":[[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":["r"],"id":1},{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["e"]}],[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"insert","lines":["q"],"id":2},{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"insert","lines":["u"]},{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"insert","lines":["i"]},{"start":{"row":0,"column":5},"end":{"row":0,"column":6},"action":"insert","lines":["r"]}],[{"start":{"row":0,"column":6},"end":{"row":0,"column":7},"action":"insert","lines":[" "],"id":3}],[{"start":{"row":0,"column":6},"end":{"row":0,"column":7},"action":"remove","lines":[" "],"id":4}],[{"start":{"row":0,"column":6},"end":{"row":0,"column":7},"action":"insert","lines":["e"],"id":5}],[{"start":{"row":0,"column":7},"end":{"row":0,"column":8},"action":"insert","lines":[" "],"id":6}],[{"start":{"row":0,"column":8},"end":{"row":0,"column":10},"action":"insert","lines":["''"],"id":7}],[{"start":{"row":0,"column":9},"end":{"row":0,"column":10},"action":"insert","lines":["r"],"id":8},{"start":{"row":0,"column":10},"end":{"row":0,"column":11},"action":"insert","lines":["u"]},{"start":{"row":0,"column":11},"end":{"row":0,"column":12},"action":"insert","lines":["f"]},{"start":{"row":0,"column":12},"end":{"row":0,"column":13},"action":"insert","lines":["u"]},{"start":{"row":0,"column":13},"end":{"row":0,"column":14},"action":"insert","lines":["s"]}],[{"start":{"row":0,"column":15},"end":{"row":0,"column":16},"action":"insert","lines":["-"],"id":9},{"start":{"row":0,"column":16},"end":{"row":0,"column":17},"action":"insert","lines":["s"]},{"start":{"row":0,"column":17},"end":{"row":0,"column":18},"action":"insert","lines":["c"]},{"start":{"row":0,"column":18},"end":{"row":0,"column":19},"action":"insert","lines":["h"]}],[{"start":{"row":0,"column":19},"end":{"row":0,"column":20},"action":"insert","lines":["e"],"id":10},{"start":{"row":0,"column":20},"end":{"row":0,"column":21},"action":"insert","lines":["d"]},{"start":{"row":0,"column":21},"end":{"row":0,"column":22},"action":"insert","lines":["u"]},{"start":{"row":0,"column":22},"end":{"row":0,"column":23},"action":"insert","lines":["l"]},{"start":{"row":0,"column":23},"end":{"row":0,"column":24},"action":"insert","lines":["e"]},{"start":{"row":0,"column":24},"end":{"row":0,"column":25},"action":"insert","lines":["r"]},{"start":{"row":0,"column":25},"end":{"row":0,"column":26},"action":"insert","lines":["'"]}],[{"start":{"row":0,"column":26},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":11},{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":2,"column":0},"end":{"row":2,"column":1},"action":"insert","lines":["s"],"id":12},{"start":{"row":2,"column":1},"end":{"row":2,"column":2},"action":"insert","lines":["c"]},{"start":{"row":2,"column":2},"end":{"row":2,"column":3},"action":"insert","lines":["h"]},{"start":{"row":2,"column":3},"end":{"row":2,"column":4},"action":"insert","lines":["e"]},{"start":{"row":2,"column":4},"end":{"row":2,"column":5},"action":"insert","lines":["d"]},{"start":{"row":2,"column":5},"end":{"row":2,"column":6},"action":"insert","lines":["u"]}],[{"start":{"row":2,"column":6},"end":{"row":2,"column":7},"action":"insert","lines":["l"],"id":13},{"start":{"row":2,"column":7},"end":{"row":2,"column":8},"action":"insert","lines":["e"]},{"start":{"row":2,"column":8},"end":{"row":2,"column":9},"action":"insert","lines":["r"]}],[{"start":{"row":2,"column":9},"end":{"row":2,"column":10},"action":"insert","lines":[" "],"id":14},{"start":{"row":2,"column":10},"end":{"row":2,"column":11},"action":"insert","lines":["="]}],[{"start":{"row":2,"column":11},"end":{"row":2,"column":12},"action":"insert","lines":[" "],"id":15},{"start":{"row":2,"column":12},"end":{"row":2,"column":13},"action":"insert","lines":["R"]},{"start":{"row":2,"column":13},"end":{"row":2,"column":14},"action":"insert","lines":["u"]},{"start":{"row":2,"column":14},"end":{"row":2,"column":15},"action":"insert","lines":["f"]},{"start":{"row":2,"column":15},"end":{"row":2,"column":16},"action":"insert","lines":["u"]}],[{"start":{"row":2,"column":16},"end":{"row":2,"column":17},"action":"insert","lines":["s"],"id":16},{"start":{"row":2,"column":17},"end":{"row":2,"column":18},"action":"insert","lines":["s"]},{"start":{"row":2,"column":18},"end":{"row":2,"column":19},"action":"insert","lines":[":"]},{"start":{"row":2,"column":19},"end":{"row":2,"column":20},"action":"insert","lines":[":"]},{"start":{"row":2,"column":20},"end":{"row":2,"column":21},"action":"insert","lines":["S"]},{"start":{"row":2,"column":21},"end":{"row":2,"column":22},"action":"insert","lines":["c"]}],[{"start":{"row":2,"column":22},"end":{"row":2,"column":23},"action":"insert","lines":["h"],"id":17},{"start":{"row":2,"column":23},"end":{"row":2,"column":24},"action":"insert","lines":["e"]},{"start":{"row":2,"column":24},"end":{"row":2,"column":25},"action":"insert","lines":["d"]}],[{"start":{"row":2,"column":25},"end":{"row":2,"column":26},"action":"insert","lines":["u"],"id":18},{"start":{"row":2,"column":26},"end":{"row":2,"column":27},"action":"insert","lines":["l"]},{"start":{"row":2,"column":27},"end":{"row":2,"column":28},"action":"insert","lines":["e"]},{"start":{"row":2,"column":28},"end":{"row":2,"column":29},"action":"insert","lines":["r"]},{"start":{"row":2,"column":29},"end":{"row":2,"column":30},"action":"insert","lines":["."]}],[{"start":{"row":2,"column":30},"end":{"row":2,"column":31},"action":"insert","lines":["n"],"id":19},{"start":{"row":2,"column":31},"end":{"row":2,"column":32},"action":"insert","lines":["e"]},{"start":{"row":2,"column":32},"end":{"row":2,"column":33},"action":"insert","lines":["w"]}],[{"start":{"row":2,"column":30},"end":{"row":2,"column":33},"action":"remove","lines":["new"],"id":20},{"start":{"row":2,"column":30},"end":{"row":2,"column":42},"action":"insert","lines":["new_currency"]}],[{"start":{"row":2,"column":41},"end":{"row":2,"column":42},"action":"remove","lines":["y"],"id":21},{"start":{"row":2,"column":40},"end":{"row":2,"column":41},"action":"remove","lines":["c"]},{"start":{"row":2,"column":39},"end":{"row":2,"column":40},"action":"remove","lines":["n"]},{"start":{"row":2,"column":38},"end":{"row":2,"column":39},"action":"remove","lines":["e"]},{"start":{"row":2,"column":37},"end":{"row":2,"column":38},"action":"remove","lines":["r"]},{"start":{"row":2,"column":36},"end":{"row":2,"column":37},"action":"remove","lines":["r"]},{"start":{"row":2,"column":35},"end":{"row":2,"column":36},"action":"remove","lines":["u"]},{"start":{"row":2,"column":34},"end":{"row":2,"column":35},"action":"remove","lines":["c"]},{"start":{"row":2,"column":33},"end":{"row":2,"column":34},"action":"remove","lines":["_"]}],[{"start":{"row":2,"column":33},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":22}],[{"start":{"row":0,"column":14},"end":{"row":0,"column":15},"action":"remove","lines":["'"],"id":23}],[{"start":{"row":2,"column":33},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":24},{"start":{"row":3,"column":0},"end":{"row":4,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":4,"column":0},"end":{"row":4,"column":1},"action":"insert","lines":["s"],"id":25},{"start":{"row":4,"column":1},"end":{"row":4,"column":2},"action":"insert","lines":["c"]},{"start":{"row":4,"column":2},"end":{"row":4,"column":3},"action":"insert","lines":["h"]},{"start":{"row":4,"column":3},"end":{"row":4,"column":4},"action":"insert","lines":["e"]}],[{"start":{"row":4,"column":4},"end":{"row":4,"column":5},"action":"insert","lines":["d"],"id":26},{"start":{"row":4,"column":5},"end":{"row":4,"column":6},"action":"insert","lines":["u"]},{"start":{"row":4,"column":6},"end":{"row":4,"column":7},"action":"insert","lines":["l"]},{"start":{"row":4,"column":7},"end":{"row":4,"column":8},"action":"insert","lines":["e"]},{"start":{"row":4,"column":8},"end":{"row":4,"column":9},"action":"insert","lines":["r"]},{"start":{"row":4,"column":9},"end":{"row":4,"column":10},"action":"insert","lines":["."]},{"start":{"row":4,"column":10},"end":{"row":4,"column":11},"action":"insert","lines":["i"]},{"start":{"row":4,"column":11},"end":{"row":4,"column":12},"action":"insert","lines":["n"]}],[{"start":{"row":4,"column":11},"end":{"row":4,"column":12},"action":"remove","lines":["n"],"id":27},{"start":{"row":4,"column":10},"end":{"row":4,"column":11},"action":"remove","lines":["i"]}],[{"start":{"row":4,"column":10},"end":{"row":4,"column":11},"action":"insert","lines":["e"],"id":28},{"start":{"row":4,"column":11},"end":{"row":4,"column":12},"action":"insert","lines":["v"]},{"start":{"row":4,"column":12},"end":{"row":4,"column":13},"action":"insert","lines":["e"]},{"start":{"row":4,"column":13},"end":{"row":4,"column":14},"action":"insert","lines":["r"]},{"start":{"row":4,"column":14},"end":{"row":4,"column":15},"action":"insert","lines":["y"]}],[{"start":{"row":4,"column":15},"end":{"row":4,"column":16},"action":"insert","lines":[" "],"id":29}],[{"start":{"row":4,"column":16},"end":{"row":4,"column":18},"action":"insert","lines":["''"],"id":30}],[{"start":{"row":4,"column":17},"end":{"row":4,"column":18},"action":"insert","lines":["3"],"id":31},{"start":{"row":4,"column":18},"end":{"row":4,"column":19},"action":"insert","lines":["m"]}],[{"start":{"row":4,"column":20},"end":{"row":4,"column":21},"action":"insert","lines":[" "],"id":32},{"start":{"row":4,"column":21},"end":{"row":4,"column":22},"action":"insert","lines":["d"]},{"start":{"row":4,"column":22},"end":{"row":4,"column":23},"action":"insert","lines":["o"]}],[{"start":{"row":4,"column":21},"end":{"row":4,"column":23},"action":"remove","lines":["do"],"id":33},{"start":{"row":4,"column":21},"end":{"row":6,"column":3},"action":"insert","lines":["do","    ","end"]}],[{"start":{"row":5,"column":4},"end":{"row":67,"column":23},"action":"insert","lines":["require 'one_signal'","    url='https://finance.naver.com/marketindex/exchangeDetail.nhn?marketindexCd=FX_JPYKRW_SHB'","    doc=Nokogiri::HTML(open(url),nil, 'euc-kr')","    currency=doc.css('p.no_today')","    @new_currency=currency.map{|cur| cur.text} #지금 100엔당 얼마인지?","    currency_name=doc.css(\"h3.h_lst\")","    @new_currency_name=currency_name.map{|cur_n| cur_n.text} #외환명이라는데","    u_rate = current_user.rate.to_f","    @new_currency[0].gsub!(\",\",\"\")","    @new_currency[0].gsub!(\" \",\"\")","    @new_currency[0].gsub!(\"원\",\"\")","    rate = @new_currency[0].to_f","    OneSignal::OneSignal.api_key = \"N2YwYjc1MjItNGVmZS00YmVjLWE5NjUtMzBmMDUzMDJiNzY5\"","    OneSignal::OneSignal.user_auth_key = \"OWE3NWM4NDYtMTMyZi00NGM1LTgyOGYtODY4NzRlYThlZjVm\"","    app_id = \"88272bce-6e40-4dd9-9d37-8766fdbfcd99\"","    ","    params = {","        app_id: app_id","    }","    ","    response = OneSignal::Player.all(params: params)","    count = JSON.parse(response.body)[\"total_count\"].to_i","    puts \"-----------------------------\"+ count.to_s + \"---------------------------------------\"","    idArray = []","    ","    for i in 0..count-1","      idArray.push(JSON.parse(response.body)[\"players\"][i][\"id\"])","      puts \"-------------------------------\" + JSON.parse(response.body)[\"players\"][i][\"id\"].to_s + \"=================================\"","      puts \"===================================\" + idArray[i] + \"=============================================\"","    end","    ","    sendArray = []","    ","    for i in 0..count-1","      response = OneSignal::Player.get(id: idArray[i])","      if u_rate >= rate and current_user.message_flag == true","        sendArray.push(idArray[i])","        user_array = User.where(onesignal_id: idArray[i])","        user = user_array[0]","        user.message_flag = false","        user.save","        puts \"@@@@@@@@@@@@@@@@@@@@@@@@\" + sendArray[i] + \"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\"","        puts \"---------------------------%\"+ idArray[i].to_s + \"%%%%%%----------------------------\"","      end","    end","    ","    # puts \"==============================\" +sendArray[0] + \"''''''''''''''''''''''''''''''''''''''''\"","    ","    if sendArray.length != 0","      params ={","        include_player_ids: sendArray,","        app_id: app_id,","        language: \"ko\",","        contents: {","            en: \"지정하신 환율에 도달했습니다: \" + rate.to_s + \"円\"","        }","      }","      OneSignal::Notification.create(params: params)","      puts \"=========================================성공=============================================\"","    else","      puts \"그런거 없음니다\"","    end","    redirect_to '/rate'"],"id":34}]]},"ace":{"folds":[],"scrolltop":814.1484375,"scrollleft":0,"selection":{"start":{"row":18,"column":63},"end":{"row":18,"column":63},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1534934232283,"hash":"60881709f553cf7dce9c2ab7091b10c0d8c40ba9"}